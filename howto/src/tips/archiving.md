# 서버 데이터 아카이브 하는 방법

how to archive server data

서버의 데이터를 다른 곳으로 옮기는 방법.
주로 서버를 갈아엎기 전에 실시한다.
백업(backup) 시에도 활용할 수 있다.

## 요약

**일반적인** 절차는 다음과 같다:

1. 아카이브할 데이터 분류
1. 데이터 복사

## 과정

### 아카이브할 데이터 분류

어떤 데이터가 아카이브할 만한 데이터인지
그 내용과 정책을 고려하여 적절히 선별한다. 

### 데이터 복사

아래의 작업은 네트워크 트래픽이 중전을 거치는 것을 피하기 위해
사설망 내부에서 수행하면 더 좋다.

서버 간 데이터 복사는 `rsync` 명령어를 사용한다.

만약 대상 서버의 /srv/archive 밑에 아카이브한다면, 다음과 같이 하면 된다. 물론 대상 디렉토리에 적절한 권한 설정이 미리 되어 있어야 한다.

```
sudo rsync --progress -av . 계정명@서버주소:/srv/archive
```

계정명과 서버 주소를 적절히 지정하면 된다.

## Windows 서버 아카이브하기

Windows 서버는 그 특성상 Linux 서버에 비해 아카이빙이 까다롭다.
방법은 둘 중 하나를 택하면 된다.

1. WinSCP 툴을 이용한 복사
1. USB로 Linux로 부팅한 후 셸에서 작업

Ubuntu Server 등 일부 Linux 배포판의 경우
USB 부팅 시 설치 없이 셸을 들어가기 까다롭기
때문에, Arch Linux를 권장한다.

대부분의 배포판이 NTFS를 지원하므로,
셸을 열고는 일반적인 절차대로 아카이빙을 하면 된다.
